<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.39.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.39.1/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<style>
    /* STYLE la zone dessus la carte et sa police et son texte */

.map-overlay-container {
    position: absolute;
    width: 30%;
    top: 0px;
    left: 0;
    padding: 20px;
    z-index: 1;
}

.map-overlay {
    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    background-color: #fff;
    border-radius: 3px;
    padding: 10px;
    box-shadow:0 1px 2px rgba(0,0,0,0.20);
}
.map-overlay h2,
.map-overlay p {
    margin: 0 0 10px;
}
</style>

<div id='map'></div>

<br>
<div class='map-overlay-container'>
  <div class='map-overlay'>
    <h2 id='location-title'>DU 25 AU 29 OCTOBRE 2017 À NANTES</h2>
    <p id='location-description'> 
Ride, Kevin Morby, Fennesz, Zombie Zombie, Chad Vangaalen, Petit Fantôme, Blanck Mass, Marietta, Jessica 93, Julien Gasc, Flotation Toy Warning, John Maus, Rhys Chatham + Will Guthrie, Orson Hentschel, Cotillon, Accident Du Travail, Loscil, Puce Mary, Carl Stone, Doppeltgänger, Big | Brave, Larsen, Jessica Moss, Trupa Trupa, Seabuckthorn, Tonstartssbandht, Mary Ocher, Charlotte Bendiks.</p>
    <small><a href="https://festival.soy/programmation">Plus d'info festival Soy</a></small>
  </div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiY29yZW50aW5sZW1haXRyZSIsImEiOiJjamJmMTkwNjMxeHZtMnBteGdxejlscmtqIn0.vO1AFeimgoh60XWlYRzVMw';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v9',
    center: [-1.55, 47.23],
    zoom: 12
});
map.on('load', function () {
    map.addLayer({
        "id": "points",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                {
                	                  
                    "type": "Feature", "properties": { "id": "2", "title": "Stereolux - Micro", "description": "Flotation Toy Warning \/ Pop cinématique \/ Talitres \/ GB</br>Marietta \/ Pop lo-fi \/ Born Bad \/ FR</br>Julien Gasc \/ Pop baroque \/ Born Bad \/ FR</br>Cotillon  \/ Pop garage \/ Burger \/ USA", "date": "MERCREDI 25 OCTOBRE : 20H00", "prix": "</br>15\/18€", "idnum": 2 }, "geometry": { "type": "Point", "coordinates": [ -1.563441459272242, 47.205088146582654 ] } },
{ "type": "Feature", "properties": { "id": "1", "title": "Le Nid : Tour de Bretagne", "description": "Charlotte Bendiks \/ Electro \/  Love OD Communications \/ NOR", "date": "MERCREDI 25 OCTOBRE : 18H30", "prix": "Accès au nid (1€)", "idnum": 1 }, "geometry": { "type": "Point", "coordinates": [ -1.558205174921201, 47.217558577319494 ] } },
{ "type": "Feature", "properties": { "id": "9", "title": "Musée d’Arts de Nantes - Galerie d'Art Moderne ", "description": "Carl Stone \/ Electro minimale \/ Unseen Worlds \/ USA-JAP </br>Accident du travail \/ Ambient \/ Bruit Direct \/ FR", "date": "DIMANCHE 29 OCTOBRE : 15H00", "prix": "Accès au Musée (4\/8€)", "idnum": 9 }, "geometry": { "type": "Point", "coordinates": [ -1.547188482223842, 47.21938074295602 ] } },
{ "type": "Feature", "properties": { "id": "3", "title": "Le lieu unique - Foyer haut", "description": "Jessica93 \/ Grunge coldwave DIY \/ Teenage Menopause \/ FR</br>Big l Brave \/ Post-rock noise \/ Southern Lord\/ CAN</br>Jessica Moss \/ Post-rock minimaliste \/ Constellation \/CAN</br>Larsen \/ Post-rock expérimental \/ Important \/ IT", "date": "JEUDI 26 OCTOBRE : 20H00", "prix": "10\/13€", "idnum": 3 }, "geometry": { "type": "Point", "coordinates": [ -1.545725217636976, 47.215508233783005 ] } },
{ "type": "Feature", "properties": { "id": "4", "title": "Mira boutique : 1B rue de Voltaire", "description": "Seabuckthorn \/ Folk psyché \/ Lost Tribe Sound \/ GB", "date": "VENDREDI 27 OCTOBRE : 18H30", "prix": "Gratuit", "idnum": 4 }, "geometry": { "type": "Point", "coordinates": [ -1.563632828938275, 47.212606210694354 ] } },
{ "type": "Feature", "properties": { "id": "5", "title": "Pôle étudiant (Université de Nantes)", "description": "Petit Fantôme \/ Pop \/ Because \/ FR</br>Blanck Mass \/ Electro noise \/ Sacred Bones  \/ GB</br>Orson Hentschel \/ Electro expérimentale \/ Denovali \/ ALL</br>Trupa trupa \/ Post-krautrock \/ Ici d’Ailleurs \/ POL</br>Puce Mary \/ Industriel noise \/ Posh Isolation \/ DAN", "date": "VENDREDI 27 OCTOBRE : 20H00", "prix": "15\/18 €", "idnum": 5 }, "geometry": { "type": "Point", "coordinates": [ -1.551632157839191, 47.245281273257675 ] } },
{ "type": "Feature", "properties": { "id": "6", "title": "Centre Chorégraphique National de Nantes", "description": "Rhys Chatham + Will Guthrie \/ Post-minimalisme \/ USA-AUS</br>Loscil \/ Electro ambient  \/ Kranky \/ CAN", "date": "SAMEDI 28 OCTOBRE : 15H00", "prix": "8\/11€", "idnum": 6 }, "geometry": { "type": "Point", "coordinates": [-1.5626 ,  47.2260] } },
{ "type": "Feature", "properties": { "id": "7", "title": "Pioche : 10 rue de Bel air", "description": "Doppeltgänger \/ Electro synthwave \/ Autoprod. \/ ESP", "date": "SAMEDI 28 OCTOBRE : 18H00", "prix": "Gratuit", "idnum": 7 }, "geometry": { "type": "Point", "coordinates": [ -1.5589382, 47.221123436457241 ] } },
{ "type": "Feature", "properties": { "id": "8", "title": "Maison de quartier de Doulon", "description": "Zombie Zombie \/ Krautrock psyché \/ Versatile \/ FR </br>John Maus \/ Synth-pop philosophique \/ Domino \/ USA</br>Chad VanGaalen \/ Folk rock \/ Sub Pop \/ CAN</br>Tonstartssbandht \/ Psych rock lo-fi \/ Mexican Summer \/ USA", "date": "SAMEDI 28 OCTOBRE : 19H30", "prix": "16\/19€", "idnum": 8 }, "geometry": { "type": "Point", "coordinates": [ -1.509255954132539, 47.236924463705734 ] } },
{ "type": "Feature", "properties": { "id": "10", "title": "Le lieu unique - Bar et Grand atelier", "description": "Kevin Morby \/ Folk rock \/ Dead Oceans \/ USA</br>Mary Ocher \/ Expérimental \/ Klangbad \/ RUS-ALL</br>Ride \/ Shoegaze \/ Wichita \/ GB", "date": "DIMANCHE 29 OCTOBRE : 18H00", "prix": "22\/29€", "idnum": 10 }, "geometry": { "type": "Point", "coordinates": [ -1.545336514726019, 47.215422541841214 ] } 
                    }
                ]
            }
        },
        "layout": {
            "icon-image": "marker-15",
           // "text-field": "{title}",
            "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
            "text-offset": [0, 0.6],
            "text-anchor": "top"
        }
        
        
    });
    
    // When a click event occurs on a feature in the states layer, open a popup at the
    // location of the click, with description HTML from its properties.
    map.on('click', 'points', function (e) {
        new mapboxgl.Popup()
            .setLngLat(e.features[0].geometry.coordinates)
            .setHTML(e.features[0].properties.title)
            .addTo(map);
        map.flyTo({center : e.features[0].geometry.coordinates});
        document.getElementById("location-title").innerHTML = e.features[0].properties.date;
        document.getElementById("location-description").innerHTML = e.features[0].properties.description;
    });

    // Change the cursor to a pointer when the mouse is over the states layer.
    map.on('mouseenter', 'points', function () {
        map.getCanvas().style.cursor = 'pointer';
    });

    // Change it back to a pointer when it leaves.
    map.on('mouseleave', 'points', function () {
        map.getCanvas().style.cursor = '';
    });
});
</script>

</body>
</html>
